<!DOCTYPE html>

<link href='https://fonts.googleapis.com/css?family=Istok Web' rel='stylesheet'>

<style>

	body
	{
		margin-left: 10%;
		margin-right: 10%;
	}
	h1, h2, h3, h4, h5, h6
	{
		font-weight: normal;
	}

	h1
	{
		font-size: 40px;
		font-family: "Rockwell";
    	line-height: 38px;
	}

	p
	{
		font-size: 25px;
		font-family: "Istok Web";
		font-weight: 700;
	}

    .container {
        border: white;
        font-family: "Istok Web";
        font-weight: 700;
        font-size: 20px;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
    }

    input[type="checkbox"] 
    {
	  appearance: none;
	  background-color: #fff;
	  margin: 0;
	  font: inherit;
	  color: rgb(93,119,45);
	  width: 1.15em;
	  height: 1.15em;
	  /*border: 0.15em solid rgb(70, 67, 65);*/
	  transform: translateY(-0.075em);
	  display: grid;
	  place-content: center;
	}

	input[type="checkbox"]::before 
	{
	  content: "";
	  width: 0.80em;
	  height: 0.80em;
	  transform: scale(0);
	  transition: 120ms transform ease-in-out;
	  box-shadow: inset 1.15em 1.15em rgb(93,119,45);
	  clip-path: circle();
	}

	input[type="checkbox"]:checked::before 
	{
	  transform: scale(1);
	}

	input[type="checkbox"]:hover
	{
	  cursor: pointer;
	}

	input[type="submit"]:hover
	{
	  cursor: pointer;
	}

    .grade-container
    {
    	text-align: center;
    	justify-content: center;
    	width: 15%;
    	flex-shrink: 0;
    }

    .transcript-container
    {
    	text-align: center;
    	width: 30%;
    	margin-right: 5%;
    	flex-flow: column wrap;
    	flex-shrink: 0;
    	justify-content: center;
    }

    a:hover
    {
    	color: rgb(73,99,25);
    }

	input
	{
		border: white;
		font-family: "Istok Web";
		font-weight: 700;
		font-size: 20px;
	}

	input[type="submit"]
	{
		width: 100%;
		justify-content: space-between;
		transition: 0.4s;
		padding: 1rem;
	}

	input[type = "submit"]:hover 
	{
	    color: rgb(93,119,45);
	}

	select:hover 
	{
	    cursor: pointer;
	}

	.green
	{
	   color: rgb(93,119,45);	
	}

	.select-container
	{
		margin-bottom: 20px;
	}

	.form-container
	{
		width: 300px;
		margin-left: 5%;
	}
	
	.checkbox-container
	{
		display: flex;
		justify-content: center;
		text-align: center;
		flex-direction: row;
		align-items: center;
	}
	/*
	.select-box
	{
		border: none;
		appearance: none;
		padding: 10px 45px 10px 15px;
		color: white;
		background-color: rgb(93,119,45);
		font-size: 20px;
		width: 10%;
		font-family: Rockwell;
	}
	*/

	td
	{
		padding-left: 30px;
		padding-right: 30px;
	}

	tr
	{
		padding-top: -10px;
		padding-bottom: -10px;
	}

	select
	{
		width: 100%;
		justify-content: space-between;
		background-color: rgb(90, 87, 85);
		transition: 0.4s;
		padding: 1rem;

		&, &::picker(select)
		{
			appearance: base-select ;
			border: none;
			background-color: rgb(93,119,45);
			color: white;
			font-family: Rockwell;
			line-height: 1.6;
			border-radius: 0;
		}
	}

	select::picker-icon {
  		color: white;
  		transition: 0.4s rotate;
	}

	select:open::picker-icon {
  		rotate: -180deg;
	}

	option 
	{
	  padding: 10px;
	  transition: 0.4s;
	}

	option:nth-of-type(odd) 
	{
	  background: rgb(62,80,29);
	}

	option:hover,
	option:focus 
	{
		 background: plum;
	}

    output 
	{
		justify-self: center;
        padding: 30px;
        color: white;
        font-family: Istok Web;
        font-size: 30px;
        transition: opacity 1s ease-out;
        min-width: 100%;
    }

</style>

<head>
	<title>Wildwood Grade Calculator</title>
</head>
<body>
	<h1>Wildwood Grade Calculator</h1>
	<div>
		<p>This calculator uses the <a class="green" href="https://docs.google.com/document/d/e/2PACX-1vRyOENq1J_C6GdtMWk8bApE18MhFEh8-ftxNW7MtLwLKcP8iNx88x8UwdRGXGCXSVgGkSR8X_nVMw7K/pub">official grade formula</a> from Wildwood school. GPAs are rounded up for transcript purposes.</p> 
		<p>Some teachers may not use the official method for grade calculation, but most do.</p>
	</div>

	<div style="background-color: rgb(90, 87, 85); padding: 30px;" class="container">

		<div class="form-container">
			<p style="color:white;">Input Standards Below:</p>
			<form id="gradeInput">
				<div class="select-container">
					<select id="grade1" name="grade1" class="select-box">
						<button>
							<selectedcontent class="selector"></selectedcontent>
						</button>
						<option value="">--</option>
						<option value="M">M</option>
						<option value="AM">AM</option>
						<option value="DC">DC</option>
						<option value="NDC">NDC</option>
					</select>
				</div>
				<div class="select-container">
					<select id="grade2" name="grade2" class="select-box">
						<option value="">--</option>
						<option value="M">M</option>
						<option value="AM">AM</option>
						<option value="DC">DC</option>
						<option value="NDC">NDC</option>
					</select>
				</div>
				<div class="select-container">
					<select id="grade3" name="grade3" class="select-box">
						<option value="">--</option>
						<option value="M">M</option>
						<option value="AM">AM</option>
						<option value="DC">DC</option>
						<option value="NDC">NDC</option>
					</select>
				</div>
				<div class="select-container">
					<select id="grade4" name="grade4" class="select-box">
						<option value="">--</option>
						<option value="M">M</option>
						<option value="AM">AM</option>
						<option value="DC">DC</option>
						<option value="NDC">NDC</option>
					</select>
				</div>
				<div class="select-container">
					<select id="grade5" name="grade5" class="select-box">
						<option value="">--</option>
						<option value="M">M</option>
						<option value="AM">AM</option>
						<option value="DC">DC</option>
						<option value="NDC">NDC</option>
					</select>
				</div>
				<div class="select-container">
					<select id="grade6" name="grade6" class="select-box">
						<option value="">--</option>
						<option value="M">M</option>
						<option value="AM">AM</option>
						<option value="DC">DC</option>
						<option value="NDC">NDC</option>
					</select>
				</div>
			</form>
		</div>

		<div class="grade-container">
			<p style="color:white;">Your grade:</p>
			<output style="font-family:Rockwell; font-size:80px; min-width:300px;" id="outLetter" form="gradeInput" for="grade1 grade2 grade3 grade4 grade5">--</output>
			<br>
			<output id="outGrade" form="gradeInput" for="grade1 grade2 grade3 grade4 grade5">--</output>
		</div>

		<div class="transcript-container">
			<p style="color:white;">Transcript GPA:</p>
			<output style="font-family:Rockwell; font-size:80px; min-width:300px;" id="outGPA" form="gradeInput" for="grade1 grade2 grade3 grade4 grade5">--</output>
			<div class="checkbox-container">
				<input id="isHonors" type="checkbox" value="isHonors" style="margin-right: 20px;">
				<p style="color:white; margin:0;">Honors?</p>
			</div>
		</div>
	</div>
</body>

<script>
	var a = document.getElementById("grade1");
	var gradeA = a.value;
	var b = document.getElementById("grade2");
	var gradeB = b.value;
	var c = document.getElementById("grade3");
	var gradeC = c.value;
	var d = document.getElementById("grade4");
	var gradeD = d.value;
	var e = document.getElementById("grade5");
	var gradeE = e.value;
	var f = document.getElementById("grade6");
	var gradeF= f.value;
	var gradeList = [];

	var amcount = 0;
	var dccount = 0;
	var ndccount = 0;
	var mcount = 0;

	var lettergrade = " ";

	const form = document.getElementById("gradeInput");
	const outGrade = form.elements["outGrade"];
	const outLetter = form.elements["outLetter"];

	const checkbox = document.getElementById("isHonors");
	var isHonors = false

	var honorsCheck = false

	a.addEventListener("change", function()
	{
		returnGrade();
		pushGrade();
	});

	b.addEventListener("change", function()
	{
		returnGrade();
		pushGrade();
	});

	c.addEventListener("change", function()
	{
		returnGrade();
		pushGrade();
	});

	d.addEventListener("change", function()
	{
		returnGrade();
		pushGrade();
	});

	e.addEventListener("change", function()
	{
		returnGrade();
		pushGrade();
	});

	f.addEventListener("change", function()
	{
		returnGrade();
		pushGrade();
	});

	checkbox.addEventListener("change", function()
	{
		if(this.checked)
		{
			isHonors = true;
		}
		else
		{
			isHonors = false;
		}

		if(honorsCheck)
		{
			outGPA.value = roundGPA(parseFloat(getGrade(amcount, dccount, ndccount)).toFixed(2)).toFixed(2);
		}
	});

	function returnGrade()
	{

		honorsCheck = true;

		gradeA = a.value;
		gradeB = b.value;
		gradeC = c.value;
		gradeD = d.value;
		gradeE = e.value;
		gradeF= f.value;

		mcount = 0;
		amcount = 0;
		dccount = 0;
		ndccount = 0;

		lettergrade = " ";

		gradeList = [gradeA, gradeB, gradeC, gradeD, gradeE, gradeF];

		for(let index = 0; index <= 6; index++)
		{
			if(gradeList[index] == "M")
			{
				mcount++;
			}
			else if(gradeList[index] == "AM")
			{
				amcount++;
			}
			else if(gradeList[index] == "DC")
			{
				dccount++;
			}
			else if(gradeList[index] == "NDC")
			{
				ndccount++;
			}
		}

		pushGrade();
		
		return false;
	}

	function pushGrade()
	{
		if(mcount + amcount + dccount + ndccount == 6)
		{
	            outGrade.value = parseFloat(getGrade(amcount, dccount, ndccount)).toFixed(2); 
				outLetter.value = letterGrade(parseFloat(getGrade(amcount, dccount, ndccount)).toFixed(2)); 
				outGPA.value = roundGPA(parseFloat(getGrade(amcount, dccount, ndccount)).toFixed(2)).toFixed(2);
		}
		else
		{
			outGrade.value = "--"
			outLetter.value = "--"
			outGPA.value = "--" 
		}
	}

	function getGrade(am, dc, ndc)
	{
		return (4-(am*(0.25))-(dc*(.41))-(ndc*(0.63)))
	}

	function letterGrade(grade)
	{
		if(grade > 3.67)
		{
			return "A";
		}
		else if(grade > 3.34)
		{
			return "A-";
		}
		else if(grade > 3.01)
		{
			return "B+";
		}
		else if(grade > 2.67)
		{
			return "B";
		}
		else if(grade > 2.34)
		{
			return "B-";
		}
		else if(grade > 2.01)
		{
			return "C+";
		}
		else if(grade > 1.67)
		{
			return "C";
		}
		else if(grade > 1.34)
		{
			return "C-";
		}
		else if(grade > 1.0)
		{
			return "D";
		}
		else if(grade > 0.0)
		{
			return "NC";
		}
	}

	function roundGPA(grade)
	{

		var weight = 0;

		if(isHonors)
		{
			weight = 1;
		}

		if(grade > 3.67)
		{
			return weight+4.00;
		}
		else if(grade > 3.34)
		{
			return weight+3.66;
		}
		else if(grade > 3.01)
		{
			return weight+3.33;
		}
		else if(grade > 2.67)
		{
			return weight+3.00;
		}
		else if(grade > 2.34)
		{
			return weight+2.66;
		}
		else if(grade > 2.01)
		{
			return weight+2.33;
		}
		else if(grade > 1.67)
		{
			return weight+2.00;
		}
		else if(grade > 1.34)
		{
			return weight+1.66;
		}
		else if(grade > 1.0)
		{
			return weight+1.00;
		}
		else if(grade > 0.0)
		{
			return weight+0.00;
		}
	}
</script>